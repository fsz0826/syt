# 医院信息管理接口文档

## 接口列表

### 1. 获取医院列表

#### 接口地址

```
GET /api/list/orginfo
```

#### 接口描述

获取医院信息列表，支持分页、模糊查询和状态筛选。返回结果默认按照医院 ID 升序排列。

#### 请求参数

| 参数名     | 类型   | 是否必填 | 描述                                                                  | 默认值               |
| ---------- | ------ | -------- | --------------------------------------------------------------------- | -------------------- |
| parm       | string | 否       | 按医院名称或编码进行模糊查询的关键字                                  | 空字符串             |
| pageNumber | number | 否       | 页码，最小值为 1                                                      | 1                    |
| pageSize   | number | 否       | 每页条数，取值范围 1-100                                              | 10                   |
| status     | string | 否       | 医院状态筛选，可选值：normal(正常)、suspended(停诊)、planning(规划中) | 空字符串(不限制状态) |

#### 响应格式

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 30,
    "pageNumber": 1,
    "pageSize": 10,
    "myOrgInfos": [
      {
        "id": "1",
        "code": "HOS10001",
        "name": "北京市第一人民医院",
        "medicalLevel": "AAA",
        "status": "normal",
        "province": "北京",
        "city": "北京",
        "address": "北京市东城区东华门街道1号"
      }
    ]
  }
}
```

#### 响应参数说明

| 参数名                         | 类型   | 描述                                                              |
| ------------------------------ | ------ | ----------------------------------------------------------------- |
| code                           | number | 响应码，200 表示成功                                              |
| message                        | string | 响应消息                                                          |
| data                           | object | 响应数据                                                          |
| data.total                     | number | 符合查询条件的总记录数                                            |
| data.pageNumber                | number | 当前页码                                                          |
| data.pageSize                  | number | 每页条数                                                          |
| data.myOrgInfos                | array  | 医院信息列表                                                      |
| data.myOrgInfos[].id           | string | 医院 ID                                                           |
| data.myOrgInfos[].code         | string | 医院编码                                                          |
| data.myOrgInfos[].name         | string | 医院名称                                                          |
| data.myOrgInfos[].medicalLevel | string | 医院等级，可能值：SSS、AAA、BBB、AA、BB、O                        |
| data.myOrgInfos[].status       | string | 医院状态，可能值：normal(正常)、suspended(停诊)、planning(规划中) |
| data.myOrgInfos[].province     | string | 所在省份                                                          |
| data.myOrgInfos[].city         | string | 所在城市                                                          |
| data.myOrgInfos[].address      | string | 详细地址                                                          |

#### 示例请求

```
GET /api/list/orginfo?parm=北京&pageNumber=1&pageSize=5&status=normal
```

#### 示例响应

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 2,
    "pageNumber": 1,
    "pageSize": 5,
    "myOrgInfos": [
      {
        "id": "1",
        "code": "HOS10001",
        "name": "北京市第一人民医院",
        "medicalLevel": "AAA",
        "status": "normal",
        "province": "北京",
        "city": "北京",
        "address": "北京市东城区东华门街道1号"
      },
      {
        "id": "2",
        "code": "HOS10002",
        "name": "北京市中医医院",
        "medicalLevel": "AA",
        "status": "normal",
        "province": "北京",
        "city": "北京",
        "address": "北京市西城区展览路33号"
      }
    ]
  }
}
```

### 2. 获取医院详细信息

#### 接口地址

```
GET /api/detail/{code}
```

#### 接口描述

根据医院编码获取医院的详细信息，包括医院基本信息、科室列表、医院详情、预约通知和停诊信息。

#### 请求参数

| 参数名 | 类型   | 是否必填 | 描述     |
| ------ | ------ | -------- | -------- |
| code   | string | 是       | 医院编码 |

#### 响应格式

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "hospital": {
      "id": "1",
      "code": "HOS10001",
      "name": "北京市第一人民医院",
      "medicalLevel": "AAA",
      "status": "normal",
      "province": "北京",
      "city": "北京",
      "address": "北京市东城区东华门街道1号"
    },
    "departments": [
      {
        "id": 1,
        "name": "心血管内科",
        "description": "专门治疗心脏和血管相关疾病",
        "isSpecial": true
      }
    ],
    "details": {
      "introduction": "北京市第一人民医院是一所集医疗、教学、科研、预防、保健为一体的大型综合性三级甲等医院。",
      "establishedDate": "1950-01-01",
      "bedCount": 1500,
      "annualVisit": 2000000,
      "contactPhone": "010-12345678",
      "emergencyPhone": "010-87654321",
      "website": "http://www.bdfph.com",
      "email": "info@bdfph.com",
      "postalCode": "100000",
      "latitude": 39.90965321,
      "longitude": 116.39742687
    },
    "appointmentNotices": [
      {
        "id": 1,
        "title": "预约挂号新规定",
        "content": "自2025年12月1日起，所有专家号源将提前14天开放预约，请患者合理安排就诊时间。",
        "publishDate": "2025-11-01T12:00:00.000Z",
        "effectiveDate": "2025-12-01T00:00:00.000Z",
        "expiryDate": "2026-12-01T00:00:00.000Z"
      }
    ],
    "closureNotices": [
      {
        "id": 1,
        "department": "心血管内科",
        "doctorName": "张医生",
        "closureDate": "2025-12-25",
        "closureTime": "09:00:00",
        "reason": "医生学术会议",
        "isEmergency": false,
        "createdAt": "2025-11-01T12:00:00.000Z"
      }
    ]
  }
}
```

#### 响应参数说明

| 参数名                                  | 类型    | 描述                 |
| --------------------------------------- | ------- | -------------------- |
| code                                    | number  | 响应码，200 表示成功 |
| message                                 | string  | 响应消息             |
| data                                    | object  | 响应数据             |
| data.hospital                           | object  | 医院基本信息         |
| data.departments                        | array   | 科室列表             |
| data.departments[].id                   | number  | 科室 ID              |
| data.departments[].name                 | string  | 科室名称             |
| data.departments[].description          | string  | 科室描述             |
| data.departments[].isSpecial            | boolean | 是否为特色科室       |
| data.details                            | object  | 医院详细信息         |
| data.details.introduction               | string  | 医院介绍             |
| data.details.establishedDate            | string  | 建院日期             |
| data.details.bedCount                   | number  | 病床数量             |
| data.details.annualVisit                | number  | 年门诊量             |
| data.details.contactPhone               | string  | 联系电话             |
| data.details.emergencyPhone             | string  | 急诊电话             |
| data.details.website                    | string  | 官方网站             |
| data.details.email                      | string  | 电子邮箱             |
| data.details.postalCode                 | string  | 邮政编码             |
| data.details.latitude                   | number  | 纬度                 |
| data.details.longitude                  | number  | 经度                 |
| data.appointmentNotices                 | array   | 预约通知列表         |
| data.appointmentNotices[].id            | number  | 通知 ID              |
| data.appointmentNotices[].title         | string  | 通知标题             |
| data.appointmentNotices[].content       | string  | 通知内容             |
| data.appointmentNotices[].publishDate   | string  | 发布日期             |
| data.appointmentNotices[].effectiveDate | string  | 生效日期             |
| data.appointmentNotices[].expiryDate    | string  | 过期日期             |
| data.closureNotices                     | array   | 停诊信息列表         |
| data.closureNotices[].id                | number  | 停诊信息 ID          |
| data.closureNotices[].department        | string  | 科室名称             |
| data.closureNotices[].doctorName        | string  | 医生姓名             |
| data.closureNotices[].closureDate       | string  | 停诊日期             |
| data.closureNotices[].closureTime       | string  | 停诊时间             |
| data.closureNotices[].reason            | string  | 停诊原因             |
| data.closureNotices[].isEmergency       | boolean | 是否为紧急停诊       |
| data.closureNotices[].createdAt         | string  | 创建时间             |

#### 示例请求

```
GET /api/detail/HOS10001
```

#### 示例响应

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "hospital": {
      "id": "1",
      "code": "HOS10001",
      "name": "北京市第一人民医院",
      "medicalLevel": "AAA",
      "status": "normal",
      "province": "北京",
      "city": "北京",
      "address": "北京市东城区东华门街道1号"
    },
    "departments": [
      {
        "id": 1,
        "name": "心血管内科",
        "description": "专门治疗心脏和血管相关疾病",
        "isSpecial": true
      },
      {
        "id": 2,
        "name": "神经内科",
        "description": "治疗脑部和神经系统相关疾病",
        "isSpecial": true
      },
      {
        "id": 3,
        "name": "骨科",
        "description": "治疗骨骼、关节和肌肉相关疾病",
        "isSpecial": true
      },
      {
        "id": 4,
        "name": "儿科",
        "description": "专门为儿童提供医疗服务",
        "isSpecial": false
      },
      {
        "id": 5,
        "name": "急诊科",
        "description": "提供24小时紧急医疗服务",
        "isSpecial": false
      }
    ],
    "details": {
      "introduction": "北京市第一人民医院是一所集医疗、教学、科研、预防、保健为一体的大型综合性三级甲等医院。医院始建于1950年，是北京市重点建设的医疗机构之一。",
      "establishedDate": "1950-01-01",
      "bedCount": 1500,
      "annualVisit": 2000000,
      "contactPhone": "010-12345678",
      "emergencyPhone": "010-87654321",
      "website": "http://www.bdfph.com",
      "email": "info@bdfph.com",
      "postalCode": "100000",
      "latitude": null,
      "longitude": null
    },
    "appointmentNotices": [
      {
        "id": 1,
        "title": "预约挂号新规定",
        "content": "自2025年12月1日起，所有专家号源将提前14天开放预约，请患者合理安排就诊时间。",
        "publishDate": "2025-11-17T14:25:43.000Z",
        "effectiveDate": "2025-12-01T00:00:00.000Z",
        "expiryDate": "2026-12-01T00:00:00.000Z"
      }
    ],
    "closureNotices": [
      {
        "id": 1,
        "department": "心血管内科",
        "doctorName": "张医生",
        "closureDate": "2025-12-25",
        "closureTime": "09:00:00",
        "reason": "医生学术会议",
        "isEmergency": false,
        "createdAt": "2025-11-17T14:25:43.000Z"
      }
    ]
  }
}

### 3. 用户注册

#### 接口地址
```

POST /api/register

````

#### 接口描述
用户注册接口，仅需要手机号和密码即可完成注册。

#### 请求参数 (JSON Body)
| 参数名 | 类型 | 是否必填 | 描述 |
|--------|------|----------|------|
| phone | string | 是 | 手机号，唯一标识 |
| password | string | 是 | 用户密码 |

#### 响应格式
**成功响应:**
```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "userId": 1,
    "phone": "13800138000",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
````

**失败响应示例:**

```json
{
  "code": 400,
  "message": "该手机号已注册",
  "data": null
}
```

#### 响应参数说明

| 参数名      | 类型   | 描述                                                         |
| ----------- | ------ | ------------------------------------------------------------ |
| code        | number | 响应码，200 表示成功，400 表示客户端错误，500 表示服务器错误 |
| message     | string | 响应消息                                                     |
| data        | object | 响应数据                                                     |
| data.userId | number | 用户 ID                                                      |
| data.phone  | string | 手机号                                                       |
| data.token  | string | JWT 访问令牌，用于后续需要认证的接口                         |

#### 示例请求

```
POST /api/register
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "secure_password123"
}
```

#### 示例响应

```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "userId": 15,
    "phone": "13800138000",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx"
  }
}
```

### 3. 用户登录

#### 接口地址

```
POST /api/login
```

#### 接口描述

用户登录接口，通过手机号和密码进行身份验证。

#### 请求参数 (JSON Body)

| 参数名   | 类型   | 是否必填 | 描述               |
| -------- | ------ | -------- | ------------------ |
| phone    | string | 是       | 用户注册时的手机号 |
| password | string | 是       | 用户密码           |

#### 响应格式

**成功响应:**

```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "userId": 1,
    "phone": "13800138000",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**失败响应示例:**

```json
{
  "code": 400,
  "message": "手机号或密码错误",
  "data": null
}
```

#### 响应参数说明

| 参数名      | 类型   | 描述                                                         |
| ----------- | ------ | ------------------------------------------------------------ |
| code        | number | 响应码，200 表示成功，400 表示客户端错误，500 表示服务器错误 |
| message     | string | 响应消息                                                     |
| data        | object | 响应数据                                                     |
| data.userId | number | 用户 ID                                                      |
| data.phone  | string | 手机号                                                       |
| data.token  | string | JWT 访问令牌，用于后续需要认证的接口                         |

#### 示例请求

```
POST /api/login
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "secure_password123"
}
```

#### 示例响应

```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "userId": 15,
    "phone": "13800138000",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx"
  }
}
```

### 4. 获取用户信息

#### 接口地址

```
GET /api/userinfo
```

#### 接口描述

获取已登录用户的详细信息，需要在请求头中携带有效的 JWT 访问令牌。

#### 请求头

```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 响应格式

**成功响应:**

```json
{
  "code": 200,
  "message": "获取用户信息成功",
  "data": {
    "userId": 1,
    "phone": "13800138000"
  }
}
```

**失败响应示例:**

```json
{
  "code": 401,
  "message": "访问令牌缺失",
  "data": null
}
```

#### 响应参数说明

| 参数名      | 类型   | 描述                                                   |
| ----------- | ------ | ------------------------------------------------------ |
| code        | number | 响应码，200 表示成功，401 表示未授权，403 表示禁止访问 |
| message     | string | 响应消息                                               |
| data        | object | 响应数据                                               |
| data.userId | number | 用户 ID                                                |
| data.phone  | string | 手机号                                                 |

#### 示例请求

```
GET /api/userinfo
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
```

#### 示例响应

```json
{
  "code": 200,
  "message": "获取用户信息成功",
  "data": {
    "userId": 15,
    "phone": "13800138000"
  }
}
```
